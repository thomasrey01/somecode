!function(){function n(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function o(n,o){for(var t=0;t<o.length;t++){var e=o[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function t(n,t,e){return t&&o(n.prototype,t),e&&o(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{C1Hr:function(o,e,i){"use strict";i.r(e),i.d(e,"ScanPageModule",(function(){return T}));var r=i("PCNd"),c=i("mrSG"),a=i("a3Cf"),s=i("8Y7J"),b=function(n){function o(){var o=null!==n&&n.apply(this,arguments)||this;return o.Encode={TEXT_TYPE:"TEXT_TYPE",EMAIL_TYPE:"EMAIL_TYPE",PHONE_TYPE:"PHONE_TYPE",SMS_TYPE:"SMS_TYPE"},o}Object(c.c)(o,n),o.prototype.scan=function(n){return Object(a.b)(this,"scan",{callbackOrder:"reverse"},arguments)},o.prototype.encode=function(n,o){return Object(a.b)(this,"encode",{},arguments)},o.pluginName="BarcodeScanner",o.plugin="phonegap-plugin-barcodescanner",o.pluginRef="cordova.plugins.barcodeScanner",o.repo="https://github.com/phonegap/phonegap-plugin-barcodescanner",o.platforms=["Android","BlackBerry 10","Browser","iOS","Windows"],o.\u0275fac=function(n){return t(n||o)},o.\u0275prov=s.Gb({token:o,factory:function(n){return o.\u0275fac(n)}});var t=s.Rb(o);return o}(a.a),l=i("iInd"),u=i("IzEk"),d=i("381a"),f=i("PgGQ"),p=i("555R"),h=i("C/rb"),m=i("sZkV"),g=i("s7LF"),v=i("63OA"),P=i("tqRt"),y=i("SVse"),S=i("TSSN");function O(n,o){1&n&&(s.Pb(0,"div",3),s.Pb(1,"div",5),s.Lb(2,"ion-spinner"),s.Ob(),s.Ob())}function E(n,o){if(1&n){var t=s.Qb();s.Pb(0,"form",6),s.Xb("ngSubmit",(function(){return s.oc(t),s.Zb().onSubmitForm()})),s.Pb(1,"ion-row",7),s.Pb(2,"ion-col",8),s.vc(3),s.ac(4,"translate"),s.Ob(),s.Ob(),s.Pb(5,"ion-list",9),s.Pb(6,"ion-list-header"),s.Pb(7,"h5",10),s.vc(8),s.ac(9,"translate"),s.Ob(),s.Ob(),s.Pb(10,"ion-item",11),s.Pb(11,"ion-label",12),s.vc(12),s.ac(13,"translate"),s.Ob(),s.Lb(14,"ion-input",13),s.Ob(),s.Ob(),s.Pb(15,"div",3),s.Pb(16,"ion-button",14),s.vc(17),s.ac(18,"translate"),s.Ob(),s.Ob(),s.Ob()}if(2&n){var e=s.Zb();s.hc("formGroup",e.form),s.zb(3),s.xc(" ",s.bc(4,6,"scanModule.noScanSupport")," "),s.zb(5),s.xc(" ",s.bc(9,8,"scanModule.manualEntry")," "),s.zb(4),s.wc(s.bc(13,10,"scanModule.manualEntry")),s.zb(4),s.hc("disabled",!e.form.valid),s.zb(1),s.xc(" ",s.bc(18,12,"general.send")," ")}}var w,k,C,M=[{path:"",component:(w=function(){function o(t,e,i,r,c){n(this,o),this.barcodeScanner=t,this.platform=e,this.formBuilder=i,this.notifcationService=r,this.store=c,this.isManual=!1}return t(o,[{key:"ngOnInit",value:function(){this.form=this.formBuilder.group({code:[""]}),this.isLoading$=this.store.select(p.b)}},{key:"ionViewDidEnter",value:function(){this.onClickScan()}},{key:"onClickScan",value:function(){var n=this;this.platform.is("capacitor")?this.barcodeScanner.scan().then((function(o){return console.log("Barcodescanner got",o),o.cancelled?n.notifcationService.emit("scanModule.scanCancelled","warning"):o&&o.text?n.onCode(o.text.toString()):n.notifcationService.emit("scanModule.scanInvalid","warning")})).catch((function(o){return n.isManual=!0,console.log("Barcodescanner error",o),n.notifcationService.emit("scanModule.scanError","danger")})):(console.log("Not running natively, opening manual code input dialog"),this.isManual=!0)}},{key:"onSubmitForm",value:function(){return!!this.form.valid&&this.onCode(this.form.controls.code.value.toString())}},{key:"onCode",value:function(n){var o=this;if(!(n&&n.length>1))return this.notifcationService.emit("Invalid or no code of: "+n,"warning");this.notifcationService.emit("Scanned code "+n,"success"),this.store.select(h.a.selectMember).pipe(Object(u.a)(1)).subscribe((function(t){if(!t)return o.notifcationService.emit("Authentication session invalid","warning");o.store.dispatch(f.a({taskRequest:{type:d.a.accessControlRequestEntryByCode,isAsync:!1,params:{gateCode:n}}}))}))}}]),o}(),w.\u0275fac=function(n){return new(n||w)(s.Kb(b),s.Kb(m.nb),s.Kb(g.c),s.Kb(v.a),s.Kb(P.h))},w.\u0275cmp=s.Eb({type:w,selectors:[["app-scan"]],decls:15,vars:11,consts:[[3,"translucent"],["class","ion-padding",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"ion-padding"],["expand","block","color","primary",3,"click"],[1,"ion-text-center"],[3,"formGroup","ngSubmit"],[1,"ion-padding-horizontal","margin-top-half"],["size","12",1,"alert","danger-alert"],["lines","full",1,"ion-no-margin","ion-no-padding"],[1,"ion-no-margin"],[1,"ion-padding-horizontal"],["position","floating"],["formControlName","code","type","number","placeholder","12345678"],["expand","block","type","submit","color","tertiary",3,"disabled"]],template:function(n,o){1&n&&(s.Pb(0,"ion-header",0),s.Pb(1,"ion-toolbar"),s.Pb(2,"ion-title"),s.vc(3),s.ac(4,"translate"),s.Ob(),s.Ob(),s.Ob(),s.Pb(5,"ion-content"),s.tc(6,O,3,0,"div",1),s.ac(7,"async"),s.tc(8,E,19,14,"form",2),s.Ob(),s.Pb(9,"ion-footer"),s.Pb(10,"ion-toolbar"),s.Pb(11,"div",3),s.Pb(12,"ion-button",4),s.Xb("click",(function(){return o.onClickScan()})),s.vc(13),s.ac(14,"translate"),s.Ob(),s.Ob(),s.Ob(),s.Ob()),2&n&&(s.hc("translucent",!0),s.zb(3),s.xc(" ",s.bc(4,5,"scanModule.scan")," "),s.zb(3),s.hc("ngIf",s.bc(7,7,o.isLoading$)),s.zb(2),s.hc("ngIf",o.isManual),s.zb(5),s.xc(" ",s.bc(14,9,"scanModule.scan")," "))},directives:[m.x,m.gb,m.eb,m.r,y.o,m.v,m.h,m.X,g.s,g.n,g.g,m.P,m.q,m.H,m.I,m.D,m.G,m.C,m.mb,g.m,g.e],pipes:[S.c,y.b],styles:[""]}),w)}],I=((C=t((function o(){n(this,o)}))).\u0275mod=s.Ib({type:C}),C.\u0275inj=s.Hb({factory:function(n){return new(n||C)},imports:[[l.m.forChild(M)],l.m]}),C),T=((k=t((function o(){n(this,o)}))).\u0275mod=s.Ib({type:k}),k.\u0275inj=s.Hb({factory:function(n){return new(n||k)},providers:[b],imports:[[I,r.a]]}),k)}}])}();