(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{C1Hr:function(n,o,t){"use strict";t.r(o),t.d(o,"ScanPageModule",(function(){return w}));var e=t("PCNd"),i=t("mrSG"),c=t("a3Cf"),r=t("8Y7J"),a=function(n){function o(){var o=null!==n&&n.apply(this,arguments)||this;return o.Encode={TEXT_TYPE:"TEXT_TYPE",EMAIL_TYPE:"EMAIL_TYPE",PHONE_TYPE:"PHONE_TYPE",SMS_TYPE:"SMS_TYPE"},o}Object(i.c)(o,n),o.prototype.scan=function(n){return Object(c.b)(this,"scan",{callbackOrder:"reverse"},arguments)},o.prototype.encode=function(n,o){return Object(c.b)(this,"encode",{},arguments)},o.pluginName="BarcodeScanner",o.plugin="phonegap-plugin-barcodescanner",o.pluginRef="cordova.plugins.barcodeScanner",o.repo="https://github.com/phonegap/phonegap-plugin-barcodescanner",o.platforms=["Android","BlackBerry 10","Browser","iOS","Windows"],o.\u0275fac=function(n){return t(n||o)},o.\u0275prov=r.Gb({token:o,factory:function(n){return o.\u0275fac(n)}});var t=r.Rb(o);return o}(c.a),s=t("iInd"),b=t("IzEk"),l=t("381a"),d=t("PgGQ"),u=t("555R"),p=t("C/rb"),f=t("sZkV"),h=t("s7LF"),m=t("63OA"),g=t("tqRt"),v=t("SVse"),P=t("TSSN");function S(n,o){1&n&&(r.Pb(0,"div",3),r.Pb(1,"div",5),r.Lb(2,"ion-spinner"),r.Ob(),r.Ob())}function O(n,o){if(1&n){const n=r.Qb();r.Pb(0,"form",6),r.Xb("ngSubmit",(function(){return r.oc(n),r.Zb().onSubmitForm()})),r.Pb(1,"ion-row",7),r.Pb(2,"ion-col",8),r.vc(3),r.ac(4,"translate"),r.Ob(),r.Ob(),r.Pb(5,"ion-list",9),r.Pb(6,"ion-list-header"),r.Pb(7,"h5",10),r.vc(8),r.ac(9,"translate"),r.Ob(),r.Ob(),r.Pb(10,"ion-item",11),r.Pb(11,"ion-label",12),r.vc(12),r.ac(13,"translate"),r.Ob(),r.Lb(14,"ion-input",13),r.Ob(),r.Ob(),r.Pb(15,"div",3),r.Pb(16,"ion-button",14),r.vc(17),r.ac(18,"translate"),r.Ob(),r.Ob(),r.Ob()}if(2&n){const n=r.Zb();r.hc("formGroup",n.form),r.zb(3),r.xc(" ",r.bc(4,6,"scanModule.noScanSupport")," "),r.zb(5),r.xc(" ",r.bc(9,8,"scanModule.manualEntry")," "),r.zb(4),r.wc(r.bc(13,10,"scanModule.manualEntry")),r.zb(4),r.hc("disabled",!n.form.valid),r.zb(1),r.xc(" ",r.bc(18,12,"general.send")," ")}}const y=[{path:"",component:(()=>{class n{constructor(n,o,t,e,i){this.barcodeScanner=n,this.platform=o,this.formBuilder=t,this.notifcationService=e,this.store=i,this.isManual=!1}ngOnInit(){this.form=this.formBuilder.group({code:[""]}),this.isLoading$=this.store.select(u.b)}ionViewDidEnter(){this.onClickScan()}onClickScan(){this.platform.is("capacitor")?this.barcodeScanner.scan().then(n=>(console.log("Barcodescanner got",n),n.cancelled?this.notifcationService.emit("scanModule.scanCancelled","warning"):n&&n.text?this.onCode(n.text.toString()):this.notifcationService.emit("scanModule.scanInvalid","warning"))).catch(n=>(this.isManual=!0,console.log("Barcodescanner error",n),this.notifcationService.emit("scanModule.scanError","danger"))):(console.log("Not running natively, opening manual code input dialog"),this.isManual=!0)}onSubmitForm(){return!!this.form.valid&&this.onCode(this.form.controls.code.value.toString())}onCode(n){if(!(n&&n.length>1))return this.notifcationService.emit("Invalid or no code of: "+n,"warning");this.notifcationService.emit("Scanned code "+n,"success"),this.store.select(p.a.selectMember).pipe(Object(b.a)(1)).subscribe(o=>{if(!o)return this.notifcationService.emit("Authentication session invalid","warning");this.store.dispatch(d.a({taskRequest:{type:l.a.accessControlRequestEntryByCode,isAsync:!1,params:{gateCode:n}}}))})}}return n.\u0275fac=function(o){return new(o||n)(r.Kb(a),r.Kb(f.nb),r.Kb(h.c),r.Kb(m.a),r.Kb(g.h))},n.\u0275cmp=r.Eb({type:n,selectors:[["app-scan"]],decls:15,vars:11,consts:[[3,"translucent"],["class","ion-padding",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"ion-padding"],["expand","block","color","primary",3,"click"],[1,"ion-text-center"],[3,"formGroup","ngSubmit"],[1,"ion-padding-horizontal","margin-top-half"],["size","12",1,"alert","danger-alert"],["lines","full",1,"ion-no-margin","ion-no-padding"],[1,"ion-no-margin"],[1,"ion-padding-horizontal"],["position","floating"],["formControlName","code","type","number","placeholder","12345678"],["expand","block","type","submit","color","tertiary",3,"disabled"]],template:function(n,o){1&n&&(r.Pb(0,"ion-header",0),r.Pb(1,"ion-toolbar"),r.Pb(2,"ion-title"),r.vc(3),r.ac(4,"translate"),r.Ob(),r.Ob(),r.Ob(),r.Pb(5,"ion-content"),r.tc(6,S,3,0,"div",1),r.ac(7,"async"),r.tc(8,O,19,14,"form",2),r.Ob(),r.Pb(9,"ion-footer"),r.Pb(10,"ion-toolbar"),r.Pb(11,"div",3),r.Pb(12,"ion-button",4),r.Xb("click",(function(){return o.onClickScan()})),r.vc(13),r.ac(14,"translate"),r.Ob(),r.Ob(),r.Ob(),r.Ob()),2&n&&(r.hc("translucent",!0),r.zb(3),r.xc(" ",r.bc(4,5,"scanModule.scan")," "),r.zb(3),r.hc("ngIf",r.bc(7,7,o.isLoading$)),r.zb(2),r.hc("ngIf",o.isManual),r.zb(5),r.xc(" ",r.bc(14,9,"scanModule.scan")," "))},directives:[f.x,f.gb,f.eb,f.r,v.o,f.v,f.h,f.X,h.s,h.n,h.g,f.P,f.q,f.H,f.I,f.D,f.G,f.C,f.mb,h.m,h.e],pipes:[P.c,v.b],styles:[""]}),n})()}];let E=(()=>{class n{}return n.\u0275mod=r.Ib({type:n}),n.\u0275inj=r.Hb({factory:function(o){return new(o||n)},imports:[[s.m.forChild(y)],s.m]}),n})(),w=(()=>{class n{}return n.\u0275mod=r.Ib({type:n}),n.\u0275inj=r.Hb({factory:function(o){return new(o||n)},providers:[a],imports:[[E,e.a]]}),n})()}}]);